# Retrieve all nodes
nodes = AdminConfig.list('Node').splitlines()

# Iterate through each node
for node in nodes:
    node_name = AdminConfig.showAttribute(node, 'name')
    
    # Retrieve all servers within the node
    servers = AdminConfig.list('Server', node).splitlines()
    
    for server in servers:
        server_name = AdminConfig.showAttribute(server, 'name')
        
        # List all ports for the server
        ports_output = AdminTask.listServerPorts(server_name, ['-nodeName', node_name])
        
        # Initialize variables
        https_port = None
        host_name = None
        
        # Parse the ports output
        for line in ports_output.splitlines():
            if line.find('WC_defaulthost_secure') != -1:
                parts = line.strip().split()
                if len(parts) >= 3:
                    https_port = parts[2]
                    host_name = parts[1]
        
        # Display the results
        if https_port and host_name:
            print "Server: %s, Node: %s, Host: %s, HTTPS Port: %s" % (server_name, node_name, host_name, https_port)
        else:
            print "Server: %s, Node: %s, HTTPS port information not found." % (server_name, node_name)
