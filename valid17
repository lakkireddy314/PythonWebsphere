# getAppServerHosts.py
# Run with: wsadmin.sh -lang jython -f getAppServerHosts.py

# 1. Retrieve all application server entries
servers = AdminConfig.list('ServerEntry').splitlines()                        # :contentReference[oaicite:10]{index=10}

# 2. Iterate and print name:host
for server in servers:
    name = server.split('(', 1)[0]                                            # :contentReference[oaicite:11]{index=11}

    # Optional: skip DMGR or nodeagent if you only want custom app servers
    if name in ['deploymentManager', 'nodeagent']:
        continue

    # 3. List endpoints for this server
    endpoints = AdminConfig.list('NamedEndPoint', server).splitlines()         # :contentReference[oaicite:12]{index=12}
    host = 'UNKNOWN'
    if endpoints:
        # Take the first endpointâ€™s host attribute (adjust selection as needed)
        host = AdminConfig.showAttribute(endpoints[0], 'host')                # :contentReference[oaicite:13]{index=13}

    print '%s : %s' % (name, host)
