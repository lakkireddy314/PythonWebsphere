# getAppServerHostnames.py
# Usage: wsadmin.sh -lang jython -f getAppServerHostnames.py

# Build a map of nodeName -> hostName
nodeMap = {}
for node in AdminConfig.list('Node').splitlines():
    nName = AdminConfig.showAttribute(node, 'name')
    nHost = AdminConfig.showAttribute(node, 'hostName')
    nodeMap[nName] = nHost

print 'Application Server â†’ Hostname'
print '-------------------------------'

# Iterate through all Server configs
for server in AdminConfig.list('Server').splitlines():
    # Filter only application servers
    serverType = AdminConfig.showAttribute(server, 'serverType')
    if serverType != 'APPLICATION_SERVER':
        continue

    sName   = AdminConfig.showAttribute(server, 'name')
    nName   = AdminConfig.showAttribute(server, 'nodeName')
    hName   = nodeMap.get(nName, 'UNKNOWN')

    print '%-30s %s' % (sName, hName)
