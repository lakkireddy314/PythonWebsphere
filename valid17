# getAppServerHostnames.py
# Usage: wsadmin.sh -lang jython -f getAppServerHostnames.py

# Print a header
print 'ApplicationServerName           NodeName            HostName'
print '-----------------------------------------------------------'

# Loop through all Server configs
for serverId in AdminConfig.list('Server').splitlines():
    # Only care about application servers
    if AdminConfig.showAttribute(serverId, 'serverType') != 'APPLICATION_SERVER':
        continue

    # Get the server name
    serverName = AdminConfig.showAttribute(serverId, 'name')

    # Get the node config ID from the server
    nodeConfigId = AdminConfig.showAttribute(serverId, 'node')

    if nodeConfigId:
        nodeName = AdminConfig.showAttribute(nodeConfigId, 'name')
        hostName = AdminConfig.showAttribute(nodeConfigId, 'hostName')
    else:
        nodeName = 'UNKNOWN'
        hostName = 'UNKNOWN'

    # Print it out in aligned columns
    print '%-30s %-20s %s' % (serverName, nodeName, hostName)
